\documentclass[12pt,a4paper,oneside]{article}

\usepackage[QX]{polski}

\usepackage[utf8]{inputenc}
\usepackage{latexsym}
\usepackage{tgpagella}
\usepackage{lmodern}
\usepackage{amsmath,amsthm,amsfonts,amssymb,alltt}
\usepackage{epsfig}
\usepackage{pdflscape}
\usepackage{caption}
\usepackage{indentfirst}
\usepackage{float}
%\usepackage{showkeys}
\bibliographystyle{plabbrv}


\usepackage{color}
\usepackage[polish]{babel}
\usepackage{datetime2}
\usepackage[x11names,dvipsnames,table]{xcolor}
\usepackage{hyperref}
\hypersetup{
pdfauthor={Roman Czapla, Olaf Bar},
colorlinks=True,
linkcolor=darkgray,  % color of internal links (change box color with linkbordercolor)
citecolor=BrickRed,  % color of links to bibliography
filecolor=Magenta,   % color of file links
urlcolor=BlueViolet}	%%pdfpagemode=FullScreen}

% diagramy, grafy itp.
\usepackage{tikz}
\usetikzlibrary{positioning}
\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{chains,fit,shapes,calc}
\tikzset{main node/.style={circle,fill=blue!20,draw,minimum size=1cm,inner sep=0pt}}

% algorytmy
\usepackage[linesnumbered,lined,commentsnumbered]{algorithm2e}
\SetKwFor{ForEach}{for each}{do}{end for}%
\SetKwFor{ForAll}{for all}{do}{end for}%
\newenvironment{myalgorithm}
{\rule{\textwidth}{0.5mm}\\\SetAlCapSty{}\SetAlgoNoEnd\SetAlgoNoLine\begin{algorithm}}{\end{algorithm}\rule{\textwidth}{0.5mm}}


%---------------------
\overfullrule=2mm
\pagestyle{plain}
\textwidth=15cm \textheight=685pt \topmargin=-25pt \linespread{1.3} 
\setlength{\parskip}{0pt}
\setlength\arraycolsep{2pt}
\oddsidemargin = 0.9cm
\evensidemargin =-0.1cm

\captionsetup{width=.95\linewidth, justification=centering}
%---------------------




\newtheorem{tw}{Twierdzenie}[section]
\newtheorem{lem}[tw]{Lemat}
\newtheorem{co}[tw]{Wniosek}
\newtheorem{prop}[tw]{Stwierdzenie}
\theoremstyle{definition}
\newtheorem{ex}{Przykład}
\newtheorem{re}[tw]{Uwaga}
\newtheorem{de}{Definicja}[section]



\newcommand{\bC}{{\mathbb C}}
\newcommand{\bR}{{\mathbb R}}
\newcommand{\bZ}{{\mathbb Z}}
\newcommand{\bQ}{{\mathbb Q}}
\newcommand{\bN}{{\mathbb N}}
\newcommand{\captionT}[1]{\caption{\textsc{\footnotesize{#1}}}}
\renewcommand\figurename{Rys.}

\numberwithin{equation}{section}
\renewcommand{\thefootnote}{\arabic{footnote})}
%\renewcommand{\thefootnote}{\alph{footnote})}



\begin{document}
% --------------------------------------------
% Strona tytułowa
% --------------------------------------------

\thispagestyle{empty}
\begin{titlepage}
\begin{center}\Large
Uniwersytet Komisji Edukacji Narodowej w Krakowie\\
\large
Instytut Bezpieczeństwa i Informatyki\\
\vskip 10pt
\end{center}
\begin{center}
\centering \includegraphics[width=1.0\columnwidth]{images/logo.png}
\end{center}

\begin{center}
 {\bf \fontsize{14pt}{14pt}\selectfont PROJEKT INŻYNIERSKI\\ DOKUMENTACJA INSTALACJI I KONFIGURACJI}
\end{center}
\vskip 5pt
\begin{center}
 {\bf \fontsize{22pt}{22pt}\selectfont Serwis Ogłoszeniowy BINM}
\end{center}

\begin{center}
 {\fontsize{12pt}{12pt}\selectfont wykonany przez: }
\end{center}
\begin{center}
 {\bf\fontsize{16pt}{16pt}\selectfont Jakub Siudek}\\
 {\fontsize{12pt}{12pt}\selectfont Nr albumu: 161028 \\\&\\}
 {\bf\fontsize{16pt}{16pt}\selectfont Imię Nazwisko (Frontend)}\\
 {\fontsize{12pt}{12pt}\selectfont Nr albumu: XXXXX\\\&\\}
 {\bf\fontsize{16pt}{16pt}\selectfont Imię Nazwisko (Mobile)}\\
 {\fontsize{12pt}{12pt}\selectfont Nr albumu: XXXXX}
\end{center}
\begin{center}
 {\fontsize{12pt}{12pt}\selectfont pod opieką:}\\
 {\bf\fontsize{12pt}{12pt}\selectfont dr inż. ...}
\end{center}

%\mbox{}
\vspace*{\fill}
%\vskip 50pt
\begin{center}
\large
Kraków \the\year\\
(ostatnia aktualizacja: \DTMcurrenttime,\;\today)
\end{center}
\end{titlepage}
\setcounter{page}{0} 
\newpage\null\thispagestyle{empty}
%\setcounter{page}{0} 
%\newpage
%\thispagestyle{empty}

\tableofcontents


\newpage

\section{Szczegółowa dokumentacja przebiegu instalacji oraz konfiguracji systemu}
\textit{Dokumentacja instalacji/konfiguracji - kierowana do administratorów (nie użytkowników!).} 

\subsection{Wymagania sprzętowe}
System składa się z części serwerowej (Backend), aplikacji webowej (Frontend) oraz aplikacji mobilnej. Minimalne wymagania sprzętowe dla środowiska produkcyjnego lub deweloperskiego (dla części serwerowej) to:

\begin{itemize}
    \item \textbf{Procesor (CPU):} Minimum 2 rdzenie.
    \item \textbf{Pamięć RAM:} Minimum 4 GB RAM (zalecane 8 GB).
    \item \textbf{Dysk twardy:} Minimum 10 GB wolnej przestrzeni dyskowej.
    \item \textbf{Sieć:} Stałe połączenie z Internetem (wymagane do komunikacji z bazą danych w chmurze oraz usługami Azure).
\end{itemize}

\subsection{Środowisko uruchomieniowe (Backend)}
Do poprawnego uruchomienia części backendowej wymagane jest:
\begin{itemize}
    \item \textbf{Java Development Kit (JDK):} Wersja 21.
    \item \textbf{Apache Maven:} Wersja 3.8.x lub nowsza.
    \item \textbf{Git:} Do pobrania kodu źródłowego.
    \item \textbf{Docker (Opcjonalnie):} Do uruchomienia aplikacji w kontenerze.
    \item \textbf{IntelliJ IDEA (Opcjonalnie):} Zalecane środowisko programistyczne.
\end{itemize}

\subsection{Opis instalacji i konfiguracji (Backend)}

\subsubsection{Krok 1: Pobranie kodu źródłowego}
Należy sklonować repozytorium projektu:
\begin{verbatim}
git clone https://github.com/kubula316/BINM
cd BINM/Backend/listing
\end{verbatim}

\subsubsection{Krok 2: Baza Danych i Magazyn Plików}
Aplikacja wymaga dostępu do dwóch kluczowych usług przechowywania danych:

\textbf{1. Relacyjna Baza Danych (PostgreSQL)}
Wymagana jest baza danych PostgreSQL w wersji 15 lub nowszej. Można wykorzystać:
\begin{itemize}
    \item Bazę danych w chmurze (np. darmowy plan \textbf{NeonDB}, AWS RDS, Azure SQL).
    \item Lokalną instalację PostgreSQL.
    \item Kontener Docker z PostgreSQL.
\end{itemize}

\textbf{2. Magazyn Plików (Azure Blob Storage)}
Do przechowywania zdjęć ogłoszeń oraz awatarów użytkowników wykorzystywana jest usługa chmurowa Azure Blob Storage. Należy posiadać aktywne konto Azure Storage Account oraz utworzone kontenery na pliki.

Połączenie z obiema usługami odbywa się wyłącznie poprzez zmienne środowiskowe.

\subsubsection{Krok 3: Konfiguracja Zmiennych Środowiskowych}
Należy skonfigurować następujące zmienne środowiskowe w systemie lub pliku konfiguracyjnym IDE/kontenera:

\textbf{Baza Danych:}
\begin{itemize}
    \item \texttt{DATASOURCE\_URL}: Pełny URL JDBC (np. \texttt{jdbc:postgresql://ep-cool-...neon.tech/listing\_db?sslmode=require})
    \item \texttt{DATASOURCE\_USERNAME}: Użytkownik bazy danych
    \item \texttt{DATASOURCE\_PASSWORD}: Hasło do bazy danych
\end{itemize}

\textbf{Bezpieczeństwo:}
\begin{itemize}
    \item \texttt{JWT\_SECRET\_KEY}: Klucz do podpisywania tokenów (min. 32 znaki)
    \item \texttt{CORS\_ALLOWED\_ORIGINS}: Adresy frontendu (np. \texttt{http://localhost:5173})
\end{itemize}

\textbf{Email (SMTP):}
Można użyć dowolnego serwera SMTP, np. Gmail lub darmowego planu \textbf{Brevo (dawniej Sendinblue)}.
\begin{itemize}
    \item \texttt{SMTP\_SERVER}: np. \texttt{smtp-relay.brevo.com}
    \item \texttt{SMTP\_PORT}: np. \texttt{587}
    \item \texttt{SMTP\_USERNAME}: Login SMTP
    \item \texttt{SMTP\_PASSWORD}: Hasło SMTP
    \item \texttt{SMTP\_FROM}: Adres nadawcy (musi być zweryfikowany w usłudze)
\end{itemize}

\textbf{Przechowywanie Plików (Azure Blob Storage):}
\begin{itemize}
    \item \texttt{AZURE\_STORAGE\_CONNECTION\_STRING}: Ciąg połączeniowy do konta Azure Storage
    \item \texttt{MEDIA\_CONTAINER}: Nazwa kontenera na zdjęcia ogłoszeń
    \item \texttt{PROFILE\_CONTAINER}: Nazwa kontenera na zdjęcia profilowe
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\linewidth]{images/EnvExample.png}
    \caption{Przykładowa konfiguracja zmiennych środowiskowych}
\end{figure}

\subsubsection{Krok 4: Uruchomienie Aplikacji}

\textbf{Metoda A: Maven (Lokalnie)}
\begin{verbatim}
mvn spring-boot:run
\end{verbatim}

\textbf{Metoda B: Docker (np. Render.com)}
W katalogu \texttt{Backend/listing} znajduje się gotowy plik \texttt{Dockerfile}. Aplikację można wdrożyć na dowolnej platformie obsługującej kontenery (np. Render, Heroku, Azure App Service), wskazując ten plik jako źródło budowania obrazu.

\textbf{Metoda C: IntelliJ IDEA (Środowisko Deweloperskie)}
Najwygodniejszym sposobem uruchomienia aplikacji podczas prac deweloperskich jest użycie IDE IntelliJ IDEA.
\begin{enumerate}
    \item Otwórz projekt w IntelliJ IDEA (plik \texttt{pom.xml} jako projekt).
    \item Skonfiguruj zmienne środowiskowe w ustawieniach uruchamiania (\textit{Run/Debug Configurations}).
    \item Uruchom klasę główną aplikacji (\texttt{ListingApplication.java}).
\end{enumerate}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\linewidth]{images/Env.png}
    \caption{Konfiguracja zmiennych środowiskowych w IntelliJ IDEA}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\linewidth]{images/Run.png}
    \caption{Uruchamianie aplikacji w IntelliJ IDEA}
\end{figure}

\subsubsection{Krok 5: Weryfikacja Instalacji}
Aby upewnić się, że aplikacja została poprawnie zainstalowana i uruchomiona, należy wykonać następujące kroki:

\begin{enumerate}
    \item \textbf{Sprawdzenie logów:} W konsoli (lub logach kontenera) powinna pojawić się informacja:
    \begin{verbatim}
    Started ListingApplication in X.XXX seconds
    \end{verbatim}

    \begin{figure}[H]
        \centering
        \includegraphics[width=1\linewidth]{images/image.png}
        \caption{Poprawne logi startowe aplikacji}
    \end{figure}
    
    Brak błędów (Exception) podczas startu oznacza, że połączenie z bazą danych i innymi usługami zostało nawiązane.
    
    \item \textbf{Test Endpointu Publicznego:} Otwórz przeglądarkę internetową lub narzędzie typu Postman i wywołaj adres:
    \begin{verbatim}
    http://localhost:8081/public/category/all
    \end{verbatim}
    Jeśli aplikacja działa poprawnie, powinieneś otrzymać odpowiedź w formacie JSON (lista kategorii lub pusta lista \texttt{[]}) oraz kod HTTP 200 OK.
    
    \item \textbf{Test Połączenia z Bazą:} Jeśli powyższy endpoint zwrócił wynik, oznacza to, że aplikacja poprawnie połączyła się z bazą danych.
\end{enumerate}

\subsubsection{Krok 6: Konto Administratora}
Przy pierwszym uruchomieniu system automatycznie tworzy domyślne konto administratora, jeśli nie istnieje:
\begin{itemize}
    \item \textbf{Email:} \texttt{admin@binm.com}
    \item \textbf{Hasło:} \texttt{admin123}
\end{itemize}

% --------------------------------------------------------------------
% MIEJSCE DLA KOLEGÓW Z ZESPOŁU
% --------------------------------------------------------------------

\subsection{Opis instalacji i konfiguracji (Frontend - React)}
\textit{[Tutaj kolega od Frontendu powinien opisać: Node.js, npm install, konfigurację .env dla adresu API, npm run dev]}

\subsection{Opis instalacji i konfiguracji (Aplikacja Mobilna - Android)}
\textit{[Tutaj kolega od Mobile powinien opisać: Android Studio, Gradle, konfigurację adresu API, budowanie APK]}


\renewcommand\refname{Literatura (jeżeli wymagana)}
\bibliography{references}
\addcontentsline{toc}{section}{Literatura}
% --------------------------------------------------------------------
%%%%%%% odkomentować gdy bibliografia ma być wewnątrz dokumentu
% --------------------------------------------------------------------
%\begin{thebibliography}{11}
%
%\addcontentsline{toc}{section}{Literatura}
%
%\bibitem{ZAN}
%C. Zannoni and P. Pasini, 
%\emph{Advances in the Computer Simulatons of Liquid Crystals}, Kluwer Academic Publishers, 2000.
%
%\end{thebibliography}

\end{document}
